<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/DIAGNOSTICO_FINAL.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/DIAGNOSTICO_FINAL.md" />
              <option name="updatedContent" value="# ✅ DIAGNOSTICO DE CONEXION - RESUMEN&#10;&#10;##  ESTADO ACTUAL&#10;&#10;### IP de tu máquina&#10;- ✅ **192.168.1.6** (WiFi) - ALCANZABLE (PING exitoso)&#10;- 192.168.1.5 (Ethernet)&#10;&#10;### Servidor Python&#10;- ❓ **Puerto 8000**: NO hay servidor corriendo en este momento&#10;- Necesitas ejecutar el servidor antes de usar la app&#10;&#10;---&#10;&#10;##  QUÉ HACER AHORA&#10;&#10;### 1. Iniciar el servidor Python&#10;&#10;**En una terminal PowerShell:**&#10;```powershell&#10;python -m http.server 8000&#10;```&#10;&#10;**O si tienes un servidor personalizado (Flask/Django):**&#10;```powershell&#10;python app.py&#10;python manage.py runserver 0.0.0.0:8000&#10;```&#10;&#10;### 2. Verificar que funciona&#10;&#10;**En tu navegador:**&#10;```&#10;http://192.168.1.6:8000&#10;```&#10;&#10;Deberías ver la lista de archivos del servidor.&#10;&#10;### 3. Compilar la app&#10;&#10;**En Android Studio:**&#10;- Click en &quot;Run&quot; o presiona Shift+F10&#10;- La app se compila y se instala en el dispositivo/emulador&#10;&#10;### 4. Probar la app&#10;&#10;Cuando abras la app:&#10;- ✅ Si ves &quot;✅ Servidor conectado&quot; → **¡LISTO!**&#10;- ❌ Si ves error → Revisa que:&#10;  1. El servidor esté corriendo (paso 1)&#10;  2. El teléfono esté en la misma red WiFi&#10;  3. El firewall no bloquee el puerto 8000&#10;&#10;---&#10;&#10;##  CONFIGURACION EN LA APP&#10;&#10;**Archivo:** `MainActivity.kt`&#10;**Línea:** 35-39&#10;&#10;```kotlin&#10;private val BASE_URL = &quot;http://192.168.1.6:8000&quot;&#10;```&#10;&#10;Si cambiaste a Ethernet, usa:&#10;```kotlin&#10;private val BASE_URL = &quot;http://192.168.1.5:8000&quot;&#10;```&#10;&#10;---&#10;&#10;##  COMANDOS ÚTILES&#10;&#10;**Verificar si el servidor está corriendo:**&#10;```powershell&#10;netstat -an | findstr &quot;8000&quot;&#10;```&#10;&#10;**Desbloquear puerto en firewall:**&#10;```powershell&#10;New-NetFirewallRule -DisplayName &quot;Allow Port 8000&quot; -Direction Inbound -LocalPort 8000 -Protocol TCP -Action Allow&#10;```&#10;&#10;**Probar conexión desde terminal:**&#10;```powershell&#10;curl http://192.168.1.6:8000&#10;```&#10;&#10;---&#10;&#10;## ✨ RESUMEN RÁPIDO&#10;&#10;| Elemento | Valor |&#10;|----------|-------|&#10;| IP de tu PC | 192.168.1.6 |&#10;| Puerto servidor | 8000 |&#10;| URL para conectar | http://192.168.1.6:8000 |&#10;| App actualizada | ✅ Sí |&#10;| Servidor corriendo | ❓ No (debes iniciarlo) |&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/GUIA_CONEXION.md">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/GUIA_CONEXION.md" />
              <option name="updatedContent" value="#  GUÍA PARA CONECTAR LA APP AL SERVIDOR&#10;&#10;## ✅ IP DE TU MÁQUINA IDENTIFICADA&#10;&#10;Tu máquina tiene **dos direcciones IP** en la red local:&#10;- **192.168.1.5** (Ethernet/Cable)&#10;- **192.168.1.6** (WiFi/Inalámbrico) ← **RECOMENDADO**&#10;&#10;##  PASOS PARA QUE FUNCIONE:&#10;&#10;### 1️⃣ VERIFICAR QUE ANDROID ESTÉ EN LA MISMA RED&#10;- Si usas **WiFi en Android**: Conecta al mismo WiFi que tu PC&#10;- Si usas **Emulador**: Debe estar en la misma red virtual&#10;&#10;### 2️⃣ VERIFICAR LA CONEXIÓN A LA RED&#10;&#10;**Desde tu PC, verifica que puedas alcanzar el servidor:**&#10;```powershell&#10;ping 192.168.1.6&#10;```&#10;&#10;**Desde Android/Emulador:**&#10;```powershell&#10;ping 192.168.1.6&#10;```&#10;&#10;### 3️⃣ INICIADOR DEL SERVIDOR PYTHON&#10;&#10;**En Windows PowerShell (desde cualquier carpeta donde esté tu backend):**&#10;```powershell&#10;python -m http.server 8000&#10;```&#10;&#10;O si tienes un servidor Flask/Django:&#10;```powershell&#10;python app.py&#10;python manage.py runserver 0.0.0.0:8000&#10;```&#10;&#10;### 4️⃣ VERIFICAR QUE EL SERVIDOR ESTÁ CORRIENDO&#10;&#10;**Desde tu navegador en la PC:**&#10;```&#10;http://localhost:8000&#10;http://192.168.1.6:8000&#10;```&#10;&#10;**Desde la terminal:**&#10;```powershell&#10;curl http://192.168.1.6:8000&#10;```&#10;&#10;### 5️⃣ COMPILAR E INSTALAR LA APP&#10;&#10;**En Android Studio:**&#10;```bash&#10;./gradlew build&#10;```&#10;&#10;O usa el botón &quot;Run&quot; en Android Studio.&#10;&#10;### 6️⃣ PROBAR LA CONEXIÓN&#10;&#10;Cuando abras la app:&#10;- ✅ Si ves &quot;✅ Servidor conectado&quot; → **¡FUNCIONA!**&#10;- ❌ Si ves &quot;❌ No se conecta al servidor&quot; → Revisa:&#10;  1. ¿El servidor está corriendo?&#10;  2. ¿La IP es correcta?&#10;  3. ¿Estás en la misma red?&#10;  4. ¿El firewall está bloqueando el puerto 8000?&#10;&#10;---&#10;&#10;##  TROUBLESHOOTING&#10;&#10;### Error: &quot;No se puede conectar a 192.168.1.6:8000&quot;&#10;&#10;**Solución 1: Verificar el servidor**&#10;```powershell&#10;netstat -an | findstr &quot;8000&quot;&#10;```&#10;Si no aparece nada, el servidor no está corriendo.&#10;&#10;**Solución 2: Desactivar el firewall temporalmente**&#10;```powershell&#10;# Windows Defender Firewall&#10;Set-NetFirewallProfile -Profile Domain,Public,Private -Enabled $false&#10;```&#10;&#10;**Solución 3: Permitir puerto 8000 en firewall**&#10;```powershell&#10;New-NetFirewallRule -DisplayName &quot;Allow Port 8000&quot; -Direction Inbound -LocalPort 8000 -Protocol TCP -Action Allow&#10;```&#10;&#10;---&#10;&#10;##  IP CONFIGURADA EN KOTLIN&#10;&#10;El archivo `MainActivity.kt` ya tiene configurado:&#10;```kotlin&#10;private val BASE_URL = &quot;http://192.168.1.6:8000&quot;&#10;```&#10;&#10;Si necesitas cambiar a Ethernet (192.168.1.5), edita esta línea.&#10;&#10;---&#10;&#10;## ✨ RESUMEN&#10;&#10;| Elemento | Valor |&#10;|----------|-------|&#10;| **IP de tu PC (WiFi)** | 192.168.1.6 |&#10;| **IP de tu PC (Cable)** | 192.168.1.5 |&#10;| **Puerto del servidor** | 8000 |&#10;| **URL completa** | http://192.168.1.6:8000 |&#10;| **Configurada en** | MainActivity.kt línea 35-38 |&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/REFERENCIA_RAPIDA.txt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/REFERENCIA_RAPIDA.txt" />
              <option name="updatedContent" value="# ⚡ REFERENCIA RÁPIDA&#10;&#10;##  EXPLICAR EN 30 SEGUNDOS&#10;&#10;&gt; La app Android pide videos a un servidor Python en `192.168.1.6:8000`. &#10;&gt; El servidor descarga videos de YouTube y los convierte a MP3 si es necesario. &#10;&gt; La app muestra el progreso y guarda los archivos en el teléfono.&#10;&#10;---&#10;&#10;##  LOS 3 ENDPOINTS&#10;&#10;```&#10;GET  /               → Verificar servidor OK&#10;POST /info          → Retornar {&quot;title&quot;: &quot;...&quot;}&#10;POST /download      → Retornar archivo binario&#10;```&#10;&#10;---&#10;&#10;##  CÓDIGO MÍNIMO (Python Flask)&#10;&#10;```python&#10;from flask import Flask, request, jsonify, send_file&#10;import yt_dlp&#10;&#10;app = Flask(__name__)&#10;&#10;@app.route('/', methods=['GET'])&#10;def home():&#10;    return &quot;ok&quot;, 200&#10;&#10;@app.route('/info', methods=['POST'])&#10;def info():&#10;    url = request.form.get('url')&#10;    with yt_dlp.YoutubeDL() as ydl:&#10;        info = ydl.extract_info(url, download=False)&#10;    return jsonify({'title': info.get('title')}), 200&#10;&#10;@app.route('/download', methods=['POST'])&#10;def download():&#10;    url = request.form.get('url')&#10;    to_mp3 = request.form.get('to_mp3') == 'true'&#10;    # ... procesar con yt-dlp ...&#10;    return send_file(file_path, as_attachment=True)&#10;&#10;app.run(host='0.0.0.0', port=8000)&#10;```&#10;&#10;---&#10;&#10;## ✅ CHECKLIST MÍNIMO&#10;&#10;- [ ] pip install yt-dlp flask&#10;- [ ] Copiar código arriba&#10;- [ ] python app.py&#10;- [ ] curl http://192.168.1.6:8000/&#10;- [ ] Ver &quot;✅ Conectado&quot; en la app&#10;&#10;---&#10;&#10;##  ERROR → SOLUCIÓN&#10;&#10;| Error | Solución |&#10;|-------|----------|&#10;| No conecta | `python app.py` |&#10;| IP error | 192.168.1.6 |&#10;| Timeout | Servidor lento |&#10;| Error 400 | URL inválida |&#10;| Error 500 | Ver logs Python |&#10;&#10;---&#10;&#10;##  ARCHIVOS QUE NECESITAS&#10;&#10;1. **PARA_EL_BACKEND.md** ← Más detalles&#10;2. **GUIA_BACKEND_REQUERIMIENTOS.md** ← Especificación&#10;3. Este archivo ← Referencia rápida&#10;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/diagnose_backend.ps1">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/diagnose_backend.ps1" />
              <option name="updatedContent" value="# Script de Diagnóstico Completo - PowerShell&#10;# Ejecutar como: powershell -ExecutionPolicy Bypass -File diagnose_backend.ps1&#10;&#10;Write-Host &quot;╔════════════════════════════════════════════════════════════╗&quot; -ForegroundColor Cyan&#10;Write-Host &quot;║         DIAGNÓSTICO COMPLETO DE BACKEND                   ║&quot; -ForegroundColor Cyan&#10;Write-Host &quot;║         Servidor esperado: 192.168.1.48:8001              ║&quot; -ForegroundColor Cyan&#10;Write-Host &quot;╚════════════════════════════════════════════════════════════╝&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 1: Mostrar IP Local&#10;Write-Host &quot;[1] Mostrando IP Local...&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;$ips = Get-NetIPAddress -AddressFamily IPv4 | Where-Object {$_.IPAddress -notmatch &quot;^127\.&quot; -and $_.IPAddress -notmatch &quot;^169\.&quot;}&#10;foreach ($ip in $ips) {&#10;    Write-Host &quot;  $($ip.InterfaceAlias): $($ip.IPAddress)&quot; -ForegroundColor Green&#10;}&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 2: Verificar si puerto 8001 está abierto localmente&#10;Write-Host &quot;[2] Verificando puertos abiertos en esta máquina...&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;$puerto_local = Get-NetTCPConnection -LocalPort 8001 -ErrorAction SilentlyContinue&#10;if ($puerto_local) {&#10;    Write-Host &quot;  ✅ Puerto 8001 está ESCUCHANDO en esta máquina:&quot; -ForegroundColor Green&#10;    $puerto_local | Select-Object LocalAddress, State, OwningProcess | Format-Table -AutoSize&#10;} else {&#10;    Write-Host &quot;  ⚠️  Puerto 8001 NO está escuchando en esta máquina&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;     Buscar otros puertos con servidor:&quot; -ForegroundColor Gray&#10;    Get-NetTCPConnection -State Listen | Where-Object {$_.LocalAddress -notmatch &quot;^127\.&quot; -and $_.LocalAddress -notmatch &quot;^169\.&quot;} | Select-Object LocalAddress, LocalPort, State | Format-Table -AutoSize&#10;}&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 3: Probar ping a 192.168.1.48&#10;Write-Host &quot;[3] Probando conectividad a 192.168.1.48...&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;$ping_result = Test-Connection -ComputerName 192.168.1.48 -Count 1 -Quiet -ErrorAction SilentlyContinue&#10;if ($ping_result) {&#10;    Write-Host &quot;  ✅ IP 192.168.1.48 es ALCANZABLE&quot; -ForegroundColor Green&#10;    Test-Connection -ComputerName 192.168.1.48 -Count 1 | Select-Object Address, IPV4Address, ResponseTime | Format-Table&#10;} else {&#10;    Write-Host &quot;  ❌ IP 192.168.1.48 NO es alcanzable&quot; -ForegroundColor Red&#10;    Write-Host &quot;     Posibles causas:&quot; -ForegroundColor Red&#10;    Write-Host &quot;     - IP incorrecta&quot; -ForegroundColor Red&#10;    Write-Host &quot;     - Dispositivo desconectado&quot; -ForegroundColor Red&#10;    Write-Host &quot;     - Red diferente&quot; -ForegroundColor Red&#10;}&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 4: Probar conexión a puerto 8001&#10;Write-Host &quot;[4] Probando conexión a http://192.168.1.48:8001/&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;try {&#10;    $response = Invoke-WebRequest -Uri &quot;http://192.168.1.48:8001/&quot; -TimeoutSec 5 -ErrorAction Stop&#10;    Write-Host &quot;  ✅ CONEXIÓN EXITOSA AL SERVIDOR&quot; -ForegroundColor Green&#10;    Write-Host &quot;     Código HTTP: $($response.StatusCode)&quot; -ForegroundColor Green&#10;    Write-Host &quot;     Descripción: $($response.StatusDescription)&quot; -ForegroundColor Green&#10;    Write-Host &quot;     Tamaño respuesta: $($response.RawContentLength) bytes&quot; -ForegroundColor Green&#10;} catch [System.Net.Http.HttpRequestException] {&#10;    if ($_.Exception.Message -like &quot;*Connection refused*&quot; -or $_.Exception.Message -like &quot;*refused*&quot;) {&#10;        Write-Host &quot;  ❌ CONEXIÓN RECHAZADA EN PUERTO 8001&quot; -ForegroundColor Red&#10;        Write-Host &quot;     Posibles causas:&quot; -ForegroundColor Red&#10;        Write-Host &quot;     - Servidor NO está corriendo en puerto 8001&quot; -ForegroundColor Red&#10;        Write-Host &quot;     - Servidor escucha en puerto diferente&quot; -ForegroundColor Red&#10;        Write-Host &quot;     - Firewall bloqueando puerto 8001&quot; -ForegroundColor Red&#10;    } elseif ($_.Exception.Message -like &quot;*timeout*&quot; -or $_.Exception.Message -like &quot;*timed out*&quot;) {&#10;        Write-Host &quot;  ⏱️  TIMEOUT - Servidor no responde en tiempo&quot; -ForegroundColor Red&#10;        Write-Host &quot;     El servidor puede estar muy lento&quot; -ForegroundColor Red&#10;    } else {&#10;        Write-Host &quot;  ❌ ERROR: $($_.Exception.Message)&quot; -ForegroundColor Red&#10;    }&#10;} catch {&#10;    Write-Host &quot;  ❌ ERROR: $($_.Exception.GetType().Name)&quot; -ForegroundColor Red&#10;    Write-Host &quot;     $($_.Exception.Message)&quot; -ForegroundColor Red&#10;}&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 5: Probar endpoints específicos&#10;Write-Host &quot;[5] Probando endpoints del servidor...&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;&#10;$endpoints = @(&#10;    @{url = &quot;http://192.168.1.48:8001/&quot;; nombre = &quot;Raíz (/)&quot;; metodo = &quot;GET&quot;},&#10;    @{url = &quot;http://192.168.1.48:8001/info&quot;; nombre = &quot;Info (/info)&quot;; metodo = &quot;POST&quot;},&#10;    @{url = &quot;http://192.168.1.48:8001/download&quot;; nombre = &quot;Download (/download)&quot;; metodo = &quot;POST&quot;}&#10;)&#10;&#10;foreach ($endpoint in $endpoints) {&#10;    try {&#10;        if ($endpoint.metodo -eq &quot;GET&quot;) {&#10;            $result = Invoke-WebRequest -Uri $endpoint.url -TimeoutSec 3 -ErrorAction Stop&#10;            Write-Host &quot;  ✅ $($endpoint.nombre) - HTTP $($result.StatusCode)&quot; -ForegroundColor Green&#10;        } else {&#10;            Write-Host &quot;  ℹ️  $($endpoint.nombre) - Requiere POST (no probado)&quot; -ForegroundColor Yellow&#10;        }&#10;    } catch {&#10;        Write-Host &quot;  ❌ $($endpoint.nombre) - Error&quot; -ForegroundColor Red&#10;    }&#10;}&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 6: Sugerencias&#10;Write-Host &quot;[6] RECOMENDACIONES&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;Si el servidor no responde:&quot; -ForegroundColor Yellow&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;  1. Verifica que el backend está corriendo:&quot; -ForegroundColor White&#10;Write-Host &quot;     netstat -ano | findstr :8001&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;  2. Si está en puerto diferente, busca:&quot; -ForegroundColor White&#10;Write-Host &quot;     netstat -ano | findstr LISTENING&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;  3. Inicia el servidor backend en puerto 8001&quot; -ForegroundColor White&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;  4. Desactiva firewall temporalmente:&quot; -ForegroundColor White&#10;Write-Host &quot;     netsh advfirewall set allprofiles state off&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;  5. Si la IP cambió, actualiza en Android:&quot; -ForegroundColor White&#10;Write-Host &quot;     MainActivity.kt línea 35: BASE_URL = ...tu_nueva_ip...&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;&#10;Write-Host &quot;╔════════════════════════════════════════════════════════════╗&quot; -ForegroundColor Cyan&#10;Write-Host &quot;║         FIN DEL DIAGNÓSTICO                              ║&quot; -ForegroundColor Cyan&#10;Write-Host &quot;╚════════════════════════════════════════════════════════════╝&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>