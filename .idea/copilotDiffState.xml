<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/diagnose_backend.ps1">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/diagnose_backend.ps1" />
              <option name="updatedContent" value="# Script de Diagnóstico Completo - PowerShell&#10;# Ejecutar como: powershell -ExecutionPolicy Bypass -File diagnose_backend.ps1&#10;&#10;Write-Host &quot;╔════════════════════════════════════════════════════════════╗&quot; -ForegroundColor Cyan&#10;Write-Host &quot;║         DIAGNÓSTICO COMPLETO DE BACKEND                   ║&quot; -ForegroundColor Cyan&#10;Write-Host &quot;║         Servidor esperado: 192.168.1.48:8001              ║&quot; -ForegroundColor Cyan&#10;Write-Host &quot;╚════════════════════════════════════════════════════════════╝&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 1: Mostrar IP Local&#10;Write-Host &quot;[1] Mostrando IP Local...&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;$ips = Get-NetIPAddress -AddressFamily IPv4 | Where-Object {$_.IPAddress -notmatch &quot;^127\.&quot; -and $_.IPAddress -notmatch &quot;^169\.&quot;}&#10;foreach ($ip in $ips) {&#10;    Write-Host &quot;  $($ip.InterfaceAlias): $($ip.IPAddress)&quot; -ForegroundColor Green&#10;}&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 2: Verificar si puerto 8001 está abierto localmente&#10;Write-Host &quot;[2] Verificando puertos abiertos en esta máquina...&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;$puerto_local = Get-NetTCPConnection -LocalPort 8001 -ErrorAction SilentlyContinue&#10;if ($puerto_local) {&#10;    Write-Host &quot;  ✅ Puerto 8001 está ESCUCHANDO en esta máquina:&quot; -ForegroundColor Green&#10;    $puerto_local | Select-Object LocalAddress, State, OwningProcess | Format-Table -AutoSize&#10;} else {&#10;    Write-Host &quot;  ⚠️  Puerto 8001 NO está escuchando en esta máquina&quot; -ForegroundColor Yellow&#10;    Write-Host &quot;     Buscar otros puertos con servidor:&quot; -ForegroundColor Gray&#10;    Get-NetTCPConnection -State Listen | Where-Object {$_.LocalAddress -notmatch &quot;^127\.&quot; -and $_.LocalAddress -notmatch &quot;^169\.&quot;} | Select-Object LocalAddress, LocalPort, State | Format-Table -AutoSize&#10;}&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 3: Probar ping a 192.168.1.48&#10;Write-Host &quot;[3] Probando conectividad a 192.168.1.48...&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;$ping_result = Test-Connection -ComputerName 192.168.1.48 -Count 1 -Quiet -ErrorAction SilentlyContinue&#10;if ($ping_result) {&#10;    Write-Host &quot;  ✅ IP 192.168.1.48 es ALCANZABLE&quot; -ForegroundColor Green&#10;    Test-Connection -ComputerName 192.168.1.48 -Count 1 | Select-Object Address, IPV4Address, ResponseTime | Format-Table&#10;} else {&#10;    Write-Host &quot;  ❌ IP 192.168.1.48 NO es alcanzable&quot; -ForegroundColor Red&#10;    Write-Host &quot;     Posibles causas:&quot; -ForegroundColor Red&#10;    Write-Host &quot;     - IP incorrecta&quot; -ForegroundColor Red&#10;    Write-Host &quot;     - Dispositivo desconectado&quot; -ForegroundColor Red&#10;    Write-Host &quot;     - Red diferente&quot; -ForegroundColor Red&#10;}&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 4: Probar conexión a puerto 8001&#10;Write-Host &quot;[4] Probando conexión a http://192.168.1.48:8001/&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;try {&#10;    $response = Invoke-WebRequest -Uri &quot;http://192.168.1.48:8001/&quot; -TimeoutSec 5 -ErrorAction Stop&#10;    Write-Host &quot;  ✅ CONEXIÓN EXITOSA AL SERVIDOR&quot; -ForegroundColor Green&#10;    Write-Host &quot;     Código HTTP: $($response.StatusCode)&quot; -ForegroundColor Green&#10;    Write-Host &quot;     Descripción: $($response.StatusDescription)&quot; -ForegroundColor Green&#10;    Write-Host &quot;     Tamaño respuesta: $($response.RawContentLength) bytes&quot; -ForegroundColor Green&#10;} catch [System.Net.Http.HttpRequestException] {&#10;    if ($_.Exception.Message -like &quot;*Connection refused*&quot; -or $_.Exception.Message -like &quot;*refused*&quot;) {&#10;        Write-Host &quot;  ❌ CONEXIÓN RECHAZADA EN PUERTO 8001&quot; -ForegroundColor Red&#10;        Write-Host &quot;     Posibles causas:&quot; -ForegroundColor Red&#10;        Write-Host &quot;     - Servidor NO está corriendo en puerto 8001&quot; -ForegroundColor Red&#10;        Write-Host &quot;     - Servidor escucha en puerto diferente&quot; -ForegroundColor Red&#10;        Write-Host &quot;     - Firewall bloqueando puerto 8001&quot; -ForegroundColor Red&#10;    } elseif ($_.Exception.Message -like &quot;*timeout*&quot; -or $_.Exception.Message -like &quot;*timed out*&quot;) {&#10;        Write-Host &quot;  ⏱️  TIMEOUT - Servidor no responde en tiempo&quot; -ForegroundColor Red&#10;        Write-Host &quot;     El servidor puede estar muy lento&quot; -ForegroundColor Red&#10;    } else {&#10;        Write-Host &quot;  ❌ ERROR: $($_.Exception.Message)&quot; -ForegroundColor Red&#10;    }&#10;} catch {&#10;    Write-Host &quot;  ❌ ERROR: $($_.Exception.GetType().Name)&quot; -ForegroundColor Red&#10;    Write-Host &quot;     $($_.Exception.Message)&quot; -ForegroundColor Red&#10;}&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 5: Probar endpoints específicos&#10;Write-Host &quot;[5] Probando endpoints del servidor...&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;&#10;$endpoints = @(&#10;    @{url = &quot;http://192.168.1.48:8001/&quot;; nombre = &quot;Raíz (/)&quot;; metodo = &quot;GET&quot;},&#10;    @{url = &quot;http://192.168.1.48:8001/info&quot;; nombre = &quot;Info (/info)&quot;; metodo = &quot;POST&quot;},&#10;    @{url = &quot;http://192.168.1.48:8001/download&quot;; nombre = &quot;Download (/download)&quot;; metodo = &quot;POST&quot;}&#10;)&#10;&#10;foreach ($endpoint in $endpoints) {&#10;    try {&#10;        if ($endpoint.metodo -eq &quot;GET&quot;) {&#10;            $result = Invoke-WebRequest -Uri $endpoint.url -TimeoutSec 3 -ErrorAction Stop&#10;            Write-Host &quot;  ✅ $($endpoint.nombre) - HTTP $($result.StatusCode)&quot; -ForegroundColor Green&#10;        } else {&#10;            Write-Host &quot;  ℹ️  $($endpoint.nombre) - Requiere POST (no probado)&quot; -ForegroundColor Yellow&#10;        }&#10;    } catch {&#10;        Write-Host &quot;  ❌ $($endpoint.nombre) - Error&quot; -ForegroundColor Red&#10;    }&#10;}&#10;Write-Host &quot;&quot;&#10;&#10;# Paso 6: Sugerencias&#10;Write-Host &quot;[6] RECOMENDACIONES&quot; -ForegroundColor Yellow&#10;Write-Host &quot;────────────────────────────────────────────────────────&quot; -ForegroundColor Gray&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;Si el servidor no responde:&quot; -ForegroundColor Yellow&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;  1. Verifica que el backend está corriendo:&quot; -ForegroundColor White&#10;Write-Host &quot;     netstat -ano | findstr :8001&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;  2. Si está en puerto diferente, busca:&quot; -ForegroundColor White&#10;Write-Host &quot;     netstat -ano | findstr LISTENING&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;  3. Inicia el servidor backend en puerto 8001&quot; -ForegroundColor White&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;  4. Desactiva firewall temporalmente:&quot; -ForegroundColor White&#10;Write-Host &quot;     netsh advfirewall set allprofiles state off&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;Write-Host &quot;  5. Si la IP cambió, actualiza en Android:&quot; -ForegroundColor White&#10;Write-Host &quot;     MainActivity.kt línea 35: BASE_URL = ...tu_nueva_ip...&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;&#10;Write-Host &quot;╔════════════════════════════════════════════════════════════╗&quot; -ForegroundColor Cyan&#10;Write-Host &quot;║         FIN DEL DIAGNÓSTICO                              ║&quot; -ForegroundColor Cyan&#10;Write-Host &quot;╚════════════════════════════════════════════════════════════╝&quot; -ForegroundColor Cyan&#10;Write-Host &quot;&quot;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>